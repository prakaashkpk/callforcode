<!-- <h1>{{ pagename|title }}</h1>
<ul>
{% for author in authors %}
  <li{% if loop.first %} class="first"{% endif %}>
    {{ author }}
  </li>
{% endfor %}
</ul>
 -->

<!DOCTYPE html>
<html>
<head>
    <title>Callforcode - Dam Project</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
   <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>

  <style type="text/css">
  	body {
  		margin: 10px;
  	}
    #mapid { height: 280px; }
  </style>

</head>
<body>
     <div id="mapid">
        
     </div>

    <script type="text/javascript">

        var latitude = 9.529171;
        var longtitude = 77.14426;
        var access_token = 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';


        var LeafIcon = L.Icon.extend({
            options: {
                shadowUrl: '',
                iconSize:     [48, 48],
                shadowSize:   [50, 64],
                iconAnchor:   [22, 94],
                shadowAnchor: [4, 62],
                popupAnchor:  [-3, -76]
            }
        });

        var greenIcon = new LeafIcon({iconUrl: './images/location-green.png'}),
        redIcon = new LeafIcon({iconUrl: './images/location-red.png'}),
        orangeIcon = new LeafIcon({iconUrl: './images/location-green.png'});


        var mymap = L.map('mapid').setView([9.8434, 76.9763],9);

        document.getElementById("mapid").style.width = (screen.width - 20 + 'px');
        document.getElementById("mapid").style.height = (screen.height - 95 + 'px');

        // Array of all the dams
        var dams = [{"damId":7,"damname":"Sutlej Dam","damType":"Primary","damLatitude":9.529171,"damLongitude":77.14426,"damConnected":3},{"damId":1,"damname":"Idukki Dam","damType":"Primary","damLatitude":9.8434,"damLongitude":76.9763,"damConnected":3},{"damId":3,"damname":"Malampuzha Dam","damType":"Primary","damLatitude":10.499171,"damLongitude":76.41,"damConnected":0}];

        for(i = 0 ; i < dams.length ; i++) {
            var dam = dams[i];

            var icon = i == 2 ? redIcon : greenIcon;

            var latitude = dam.damLatitude;
            var longtitude = dam.damLongitude;
            console.log('lat, long: ' + latitude + ', ' + longtitude);

            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=' + access_token, {
                maxZoom: 18,
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                    '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                    'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                id: 'mapbox.streets'
            }).addTo(mymap);

            L.marker([latitude, longtitude], {icon: icon}).addTo(mymap).bindPopup(dam.damname).openPopup();
        }

        // update map location
        // map.setView(marker.getLatLng(),map.getZoom());

    </script>

</body>
</html>
